.global _start

.section .text

  movq root, %rdi
  xor %r8, %r8
  movl __ExpectedArraySize, %r8d
  movq $__ExpectedArray, %r9
  movq $0, %r10
  call rec

  cmp %r10, %r8
  jne bad_exit
  
  movq $60, %rax
  movq $0, %rdi
  syscall

bad_exit:
  movq $60, %rax
  movq $1, %rdi
  syscall

rec:
  pushq %rdi
  movq (%rdi), %r11
  cmp $0, %r11
  je skip_left
  movq %r11, %rdi
  call rec
  movq (%rsp), %rdi
skip_left:
  cmpq %r8, %r10
  je bad_exit
  movl 8(%rdi), %eax
  movl (%r9, %r10, 4), %edx
  cmpl %eax, %edx
  jne bad_exit
  inc %r10

  movq 12(%rdi), %r11
  cmp $0, %r11
  je skip_right
  movq %r11, %rdi
  call rec
skip_right:
  popq %rdi
  ret


.section .data
__ExpectedArray: .int -2086832608, -2074204565, -2026736723, -1951547015, -1771007624, -1629742594, -1451233818, -1211981759, -1188068974, -1026652036, -1012487551, -976774388, -853271814, -759134155, -421999940, -353729775, -132848180, -120469757, 144140026, 241275771, 436225892, 508248019, 538191542, 566219490, 671144662, 805162698, 1053067486, 1153097940, 1362509359, 1505054958, 1535041980, 1820418012, 1825862463
__Garbage_316555083: .byte 94, 159, 13, 47, 86, 129, 123, 192, 44, 27
__ExpectedArraySize: .int 33
__Garbage_137686387: .byte 129, 212, 119, 19, 116, 29, 105
__Nodes:
.quad 0
.int -1771007624
.quad 0
.quad __Nodes + 160
.int 671144662
.quad 0
.quad 0
.int -2026736723
.quad 0
.quad __Nodes + 640
.int 436225892
.quad __Nodes + 200
.quad __Nodes + 140
.int -2074204565
.quad __Nodes + 40
.quad __Nodes + 520
.int 1825862463
.quad 0
.quad __Nodes + 400
.int -1629742594
.quad __Nodes + 600
.quad 0
.int -2086832608
.quad 0
.quad 0
.int 566219490
.quad 0
.quad 0
.int 1053067486
.quad 0
.quad __Nodes + 260
.int 1362509359
.quad __Nodes + 440
.quad 0
.int 508248019
.quad 0
.quad 0
.int -976774388
.quad 0
.quad __Nodes + 220
.int 538191542
.quad __Nodes + 340
.quad 0
.int 241275771
.quad 0
.quad 0
.int -132848180
.quad 0
.quad 0
.int -1451233818
.quad 0
.quad __Nodes + 460
.int 1153097940
.quad 0
.quad 0
.int 1535041980
.quad __Nodes + 100
.quad __Nodes + 500
.int -120469757
.quad 0
.quad __Nodes + 80
.int -1951547015
.quad __Nodes + 0
.quad __Nodes + 480
.int -1012487551
.quad __Nodes + 540
.quad 0
.int 1505054958
.quad __Nodes + 360
.quad __Nodes + 20
.int 805162698
.quad __Nodes + 180
.quad 0
.int -1188068974
.quad __Nodes + 620
.quad __Nodes + 560
.int -353729775
.quad __Nodes + 300
.quad 0
.int 1820418012
.quad 0
.quad __Nodes + 240
.int -853271814
.quad 0
.quad 0
.int -421999940
.quad 0
.quad __Nodes + 380
.int 144140026
.quad __Nodes + 280
.quad __Nodes + 320
.int -1211981759
.quad __Nodes + 420
.quad 0
.int -1026652036
.quad 0
.quad __Nodes + 120
.int -759134155
.quad __Nodes + 580
__Garbage_18315706: .byte 109, 42, 163, 42, 163, 34, 144, 76, 60
root:
.quad __Nodes + 60
__Garbage_467553779: .byte 210, 139, 77, 30
node:
.quad 50675638
.int 1820418012
.quad 579668792
