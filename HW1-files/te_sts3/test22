.global _start

.section .text

  movq root, %rdi
  xor %r8, %r8
  movl __ExpectedArraySize, %r8d
  movq $__ExpectedArray, %r9
  movq $0, %r10
  call rec

  cmp %r10, %r8
  jne bad_exit
  
  movq $60, %rax
  movq $0, %rdi
  syscall

bad_exit:
  movq $60, %rax
  movq $1, %rdi
  syscall

rec:
  pushq %rdi
  movq (%rdi), %r11
  cmp $0, %r11
  je skip_left
  movq %r11, %rdi
  call rec
  movq (%rsp), %rdi
skip_left:
  cmpq %r8, %r10
  je bad_exit
  movl 8(%rdi), %eax
  movl (%r9, %r10, 4), %edx
  cmpl %eax, %edx
  jne bad_exit
  inc %r10

  movq 12(%rdi), %r11
  cmp $0, %r11
  je skip_right
  movq %r11, %rdi
  call rec
skip_right:
  popq %rdi
  ret


.section .data
__ExpectedArray: .int -2027073906, -2024658247, -1986305038, -1939916334, -1937804510, -1796790165, -1473943783, -1386073674, -1342223273, -1243115959, -1199539141, -1130135723, -963819232, -891443979, -862964031, -731943067, -573307660, -381615268, -188829424, -164543108, -122987562, -107948667, -31329160, -11729116, 193189394, 496374363, 503034505, 509968248, 605242891, 889482094, 904768001, 912433405, 1013237529, 1219929240, 1289521936, 1291302681, 1291562219, 1363339514, 1440061246, 1444275135, 1787134176, 1790187047, 1794147364, 1967295686

__ExpectedArraySize: .int 44
__Garbage_614250987: .byte 212, 127, 30, 60, 146, 137
__Nodes:
.quad __Nodes + 680
.int 912433405
.quad 0
.quad __Nodes + 260
.int -862964031
.quad 0
.quad 0
.int 1289521936
.quad 0
.quad 0
.int 1219929240
.quad __Nodes + 40
.quad 0
.int -188829424
.quad 0
.quad 0
.int 904768001
.quad 0
.quad 0
.int 1363339514
.quad 0
.quad 0
.int 503034505
.quad 0
.quad __Nodes + 640
.int -107948667
.quad __Nodes + 700
.quad __Nodes + 800
.int -1130135723
.quad __Nodes + 280
.quad 0
.int -1473943783
.quad 0
.quad __Nodes + 80
.int -164543108
.quad 0
.quad __Nodes + 440
.int -1199539141
.quad 0
.quad 0
.int -891443979
.quad 0
.quad __Nodes + 420
.int -381615268
.quad __Nodes + 340
.quad __Nodes + 20
.int -731943067
.quad __Nodes + 780
.quad __Nodes + 0
.int 1013237529
.quad __Nodes + 380
.quad __Nodes + 220
.int -122987562
.quad 0
.quad __Nodes + 720
.int -1796790165
.quad __Nodes + 200
.quad __Nodes + 760
.int 1444275135
.quad __Nodes + 740
.quad 0
.int -1939916334
.quad 0
.quad 0
.int -963819232
.quad __Nodes + 300
.quad 0
.int -1243115959
.quad 0
.quad 0
.int -1342223273
.quad __Nodes + 240
.quad 0
.int 1967295686
.quad 0
.quad 0
.int 1291562219
.quad __Nodes + 580
.quad 0
.int -11729116
.quad 0
.quad 0
.int -31329160
.quad __Nodes + 520
.quad __Nodes + 540
.int 193189394
.quad __Nodes + 620
.quad __Nodes + 120
.int 1440061246
.quad 0
.quad __Nodes + 160
.int 1794147364
.quad __Nodes + 480
.quad 0
.int 496374363
.quad __Nodes + 140
.quad 0
.int -2027073906
.quad __Nodes + 180
.quad __Nodes + 840
.int -1986305038
.quad __Nodes + 360
.quad __Nodes + 820
.int 889482094
.quad __Nodes + 100
.quad __Nodes + 320
.int 1790187047
.quad 0
.quad __Nodes + 400
.int -1937804510
.quad 0
.quad 0
.int 1787134176
.quad 0
.quad __Nodes + 60
.int 1291302681
.quad __Nodes + 500
.quad 0
.int -573307660
.quad 0
.quad __Nodes + 660
.int -1386073674
.quad __Nodes + 460
.quad __Nodes + 560
.int 509968248
.quad 0
.quad 0
.int -2024658247
.quad 0
__Garbage_933375029: .byte 69, 182, 36
root:
.quad __Nodes + 600
__Garbage_92333848: .byte 99, 177, 83, 42
node:
.quad 1391942533
.int 605242891
.quad 55688790
