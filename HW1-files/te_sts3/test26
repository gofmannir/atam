.global _start

.section .text

  movq root, %rdi
  xor %r8, %r8
  movl __ExpectedArraySize, %r8d
  movq $__ExpectedArray, %r9
  movq $0, %r10
  call rec

  cmp %r10, %r8
  jne bad_exit
  
  movq $60, %rax
  movq $0, %rdi
  syscall

bad_exit:
  movq $60, %rax
  movq $1, %rdi
  syscall

rec:
  pushq %rdi
  movq (%rdi), %r11
  cmp $0, %r11
  je skip_left
  movq %r11, %rdi
  call rec
  movq (%rsp), %rdi
skip_left:
  cmpq %r8, %r10
  je bad_exit
  movl 8(%rdi), %eax
  movl (%r9, %r10, 4), %edx
  cmpl %eax, %edx
  jne bad_exit
  inc %r10

  movq 12(%rdi), %r11
  cmp $0, %r11
  je skip_right
  movq %r11, %rdi
  call rec
skip_right:
  popq %rdi
  ret


.section .data
__ExpectedArray: .int -2138832306, -2101496458, -2050560102, -2048686974, -1929534232, -1871591590, -1818351020, -1677091585, -1574046795, -1519686049, -1462974995, -1460226865, -1408254238, -1319053338, -1205954251, -962646298, -962063758, -934060487, -906249253, -886828757, -819050932, -731074428, -672898947, -595654773, -451316989, -132223641, -75859781, -54636789, 131003936, 176538647, 235062360, 280275331, 334655644, 337788936, 372808619, 397186414, 453701185, 494418161, 641887419, 656609143, 748883846, 750087280, 863059401, 871659255, 882056410, 1011797357, 1054100730, 1079710540, 1125081283, 1165832149, 1339110824, 1385774084, 1408971720, 1543091385, 1646697957, 1684516603, 1895624548, 2002114328, 2011700488, 2074653478
__Garbage_26211481: .byte 193, 43
__ExpectedArraySize: .int 60
__Garbage_300935127: .byte 64, 176, 146, 86, 136, 48, 5, 161, 13
__Nodes:
.quad 0
.int -2138832306
.quad __Nodes + 580
.quad 0
.int 1543091385
.quad 0
.quad __Nodes + 200
.int -1462974995
.quad __Nodes + 440
.quad 0
.int -819050932
.quad 0
.quad __Nodes + 40
.int -1408254238
.quad 0
.quad 0
.int -2050560102
.quad 0
.quad __Nodes + 600
.int -962063758
.quad __Nodes + 720
.quad 0
.int 882056410
.quad 0
.quad __Nodes + 500
.int 2011700488
.quad 0
.quad __Nodes + 740
.int 871659255
.quad __Nodes + 140
.quad __Nodes + 920
.int -1677091585
.quad __Nodes + 980
.quad __Nodes + 1080
.int 1895624548
.quad __Nodes + 340
.quad __Nodes + 860
.int -54636789
.quad __Nodes + 1160
.quad 0
.int -906249253
.quad 0
.quad 0
.int 397186414
.quad 0
.quad 0
.int -451316989
.quad 0
.quad __Nodes + 540
.int 280275331
.quad 0
.quad 0
.int 2002114328
.quad 0
.quad __Nodes + 460
.int 1646697957
.quad __Nodes + 220
.quad 0
.int 1125081283
.quad __Nodes + 780
.quad __Nodes + 160
.int 2074653478
.quad 0
.quad __Nodes + 940
.int 372808619
.quad __Nodes + 280
.quad 0
.int -1460226865
.quad 0
.quad 0
.int 1408971720
.quad __Nodes + 20
.quad 0
.int -1574046795
.quad 0
.quad __Nodes + 1060
.int 1011797357
.quad __Nodes + 520
.quad __Nodes + 900
.int 1079710540
.quad __Nodes + 1020
.quad 0
.int 235062360
.quad 0
.quad __Nodes + 800
.int 641887419
.quad 0
.quad 0
.int -2101496458
.quad __Nodes + 100
.quad __Nodes + 760
.int -962646298
.quad 0
.quad __Nodes + 300
.int -132223641
.quad __Nodes + 820
.quad __Nodes + 0
.int -2048686974
.quad __Nodes + 700
.quad __Nodes + 380
.int 1339110824
.quad 0
.quad 0
.int -672898947
.quad 0
.quad __Nodes + 560
.int 656609143
.quad __Nodes + 400
.quad 0
.int -934060487
.quad __Nodes + 840
.quad 0
.int 863059401
.quad 0
.quad 0
.int -1205954251
.quad 0
.quad 0
.int 1165832149
.quad 0
.quad __Nodes + 80
.int -1319053338
.quad __Nodes + 240
.quad 0
.int -75859781
.quad 0
.quad __Nodes + 260
.int -886828757
.quad __Nodes + 60
.quad __Nodes + 120
.int -731074428
.quad __Nodes + 1040
.quad 0
.int 131003936
.quad 0
.quad 0
.int 1054100730
.quad 0
.quad __Nodes + 1140
.int -1871591590
.quad __Nodes + 1000
.quad __Nodes + 320
.int 334655644
.quad __Nodes + 1120
.quad 0
.int 748883846
.quad 0
.quad __Nodes + 480
.int -1519686049
.quad 0
.quad 0
.int -1818351020
.quad 0
.quad __Nodes + 660
.int 1385774084
.quad __Nodes + 360
.quad __Nodes + 680
.int -595654773
.quad __Nodes + 620
.quad __Nodes + 960
.int 750087280
.quad __Nodes + 180
.quad 0
.int 1684516603
.quad 0
.quad __Nodes + 880
.int 176538647
.quad __Nodes + 420
.quad 0
.int 337788936
.quad 0
.quad 0
.int -1929534232
.quad 0
.quad __Nodes + 1100
.int 453701185
.quad 0
__Garbage_170380840: .byte 201, 239, 210
root:
.quad __Nodes + 640
__Garbage_384007235: .byte 139, 70, 105, 92, 171, 104, 236, 46, 155
node:
.quad 1440934401
.int 494418161
.quad -1999528778
