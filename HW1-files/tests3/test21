.global _start

.section .text

  movq root, %rdi
  xor %r8, %r8
  movl __ExpectedArraySize, %r8d
  movq $__ExpectedArray, %r9
  movq $0, %r10
  call rec

  cmp %r10, %r8
  jne bad_exit
  
  movq $60, %rax
  movq $0, %rdi
  syscall

bad_exit:
  movq $60, %rax
  movq $1, %rdi
  syscall

rec:
  pushq %rdi
  movq (%rdi), %r11
  cmp $0, %r11
  je skip_left
  movq %r11, %rdi
  call rec
  movq (%rsp), %rdi
skip_left:
  cmpq %r8, %r10
  je bad_exit
  movl 8(%rdi), %eax
  movl (%r9, %r10, 4), %edx
  cmpl %eax, %edx
  jne bad_exit
  inc %r10

  movq 12(%rdi), %r11
  cmp $0, %r11
  je skip_right
  movq %r11, %rdi
  call rec
skip_right:
  popq %rdi
  ret


.section .data
__ExpectedArray: .int -2137363846, -2113789431, -2101974450, -2085978040, -2077498727, -2024908789, -2003898618, -1958424493, -1943634488, -1935763963, -1923167212, -1873362457, -1853431667, -1759801655, -1759756288, -1754587174, -1693447958, -1681275308, -1623114818, -1600845924, -1574730425, -1532135948, -1395677556, -1381843923, -1290916485, -1213100132, -1196964896, -1184009880, -1077633261, -984377291, -975623013, -947478535, -831074595, -650071449, -581635330, -563930968, -529852374, -472596209, -469623504, -381195067, -375690059, -367495514, -310068314, -260808047, -256649272, -202067821, -172878744, -127815860, -107095684, -70301598, -27983723, 416082883, 428858155, 447943905, 569340566, 619731328, 620345867, 633844912, 656097841, 677602503, 684668993, 684866888, 720713971, 762866457, 791271566, 852318739, 941301073, 975144496, 1054071660, 1070470264, 1076454522, 1090828457, 1101467125, 1107512056, 1108696743, 1129185906, 1173653180, 1206417298, 1267953172, 1305817623, 1362177163, 1372398251, 1513889117, 1527595800, 1619524704, 1624973748, 1634713264, 1644567732, 1646468541, 1680326639, 1749133429, 1814553314, 1856168191, 1919483405, 1976160822, 2057895082, 2096443927
__Garbage_214259846: .byte 159, 20, 32, 78, 2, 115
__ExpectedArraySize: .int 97

__Nodes:
.quad __Nodes + 1360
.int 2057895082
.quad __Nodes + 1320
.quad 0
.int -2101974450
.quad 0
.quad __Nodes + 1020
.int 416082883
.quad __Nodes + 100
.quad __Nodes + 120
.int 1919483405
.quad 0
.quad __Nodes + 1080
.int 1173653180
.quad __Nodes + 560
.quad __Nodes + 1600
.int 447943905
.quad 0
.quad 0
.int 1856168191
.quad 0
.quad 0
.int -1873362457
.quad __Nodes + 1160
.quad __Nodes + 300
.int -2085978040
.quad __Nodes + 980
.quad 0
.int -107095684
.quad 0
.quad __Nodes + 1220
.int 1372398251
.quad __Nodes + 400
.quad __Nodes + 680
.int 656097841
.quad __Nodes + 900
.quad 0
.int -1196964896
.quad 0
.quad 0
.int -650071449
.quad 0
.quad __Nodes + 440
.int -367495514
.quad 0
.quad 0
.int -2137363846
.quad __Nodes + 420
.quad __Nodes + 1800
.int -469623504
.quad __Nodes + 740
.quad __Nodes + 160
.int -2024908789
.quad __Nodes + 1200
.quad 0
.int -563930968
.quad __Nodes + 1860
.quad 0
.int 762866457
.quad 0
.quad 0
.int 1513889117
.quad 0
.quad 0
.int -2113789431
.quad __Nodes + 20
.quad 0
.int -375690059
.quad 0
.quad __Nodes + 220
.int 1054071660
.quad 0
.quad 0
.int -1574730425
.quad 0
.quad __Nodes + 1900
.int -1623114818
.quad 0
.quad 0
.int -1395677556
.quad 0
.quad 0
.int -1759756288
.quad __Nodes + 500
.quad 0
.int 1206417298
.quad 0
.quad __Nodes + 1640
.int 791271566
.quad __Nodes + 820
.quad __Nodes + 1680
.int -1935763963
.quad 0
.quad 0
.int 684866888
.quad 0
.quad 0
.int 677602503
.quad __Nodes + 1540
.quad __Nodes + 1840
.int 1680326639
.quad __Nodes + 1300
.quad 0
.int 619731328
.quad __Nodes + 1700
.quad __Nodes + 1660
.int -984377291
.quad 0
.quad __Nodes + 840
.int -1381843923
.quad 0
.quad __Nodes + 1060
.int -202067821
.quad __Nodes + 880
.quad __Nodes + 360
.int -472596209
.quad 0
.quad __Nodes + 1260
.int 1267953172
.quad __Nodes + 1240
.quad 0
.int -172878744
.quad 0
.quad 0
.int 852318739
.quad __Nodes + 1480
.quad __Nodes + 480
.int -1532135948
.quad __Nodes + 520
.quad __Nodes + 720
.int -1290916485
.quad __Nodes + 1620
.quad __Nodes + 800
.int -127815860
.quad __Nodes + 180
.quad __Nodes + 580
.int 975144496
.quad 0
.quad __Nodes + 700
.int -975623013
.quad __Nodes + 1140
.quad 0
.int -1754587174
.quad __Nodes + 1100
.quad 0
.int 1634713264
.quad 0
.quad 0
.int -2077498727
.quad 0
.quad __Nodes + 340
.int -1958424493
.quad __Nodes + 600
.quad 0
.int -27983723
.quad 0
.quad 0
.int -1213100132
.quad __Nodes + 240
.quad 0
.int -381195067
.quad __Nodes + 1580
.quad __Nodes + 1380
.int 1090828457
.quad __Nodes + 1280
.quad 0
.int -1693447958
.quad 0
.quad __Nodes + 1820
.int -70301598
.quad __Nodes + 1520
.quad 0
.int -947478535
.quad 0
.quad 0
.int -1853431667
.quad 0
.quad __Nodes + 920
.int -831074595
.quad __Nodes + 260
.quad 0
.int -2003898618
.quad 0
.quad __Nodes + 1340
.int 1362177163
.quad 0
.quad __Nodes + 200
.int 1527595800
.quad __Nodes + 1440
.quad __Nodes + 460
.int 1070470264
.quad __Nodes + 80
.quad __Nodes + 1880
.int 1108696743
.quad __Nodes + 1560
.quad 0
.int 1749133429
.quad 0
.quad 0
.int 2096443927
.quad 0
.quad 0
.int 1305817623
.quad 0
.quad __Nodes + 660
.int 1814553314
.quad __Nodes + 60
.quad 0
.int 1076454522
.quad 0
.quad __Nodes + 860
.int -581635330
.quad __Nodes + 760
.quad __Nodes + 780
.int 1624973748
.quad __Nodes + 960
.quad 0
.int 1619524704
.quad 0
.quad 0
.int 1107512056
.quad 0
.quad 0
.int 941301073
.quad 0
.quad __Nodes + 1420
.int 1644567732
.quad __Nodes + 0
.quad __Nodes + 40
.int 569340566
.quad __Nodes + 1500
.quad 0
.int 684668993
.quad __Nodes + 620
.quad 0
.int 1129185906
.quad 0
.quad __Nodes + 280
.int -310068314
.quad __Nodes + 1720
.quad 0
.int 428858155
.quad 0
.quad __Nodes + 1040
.int -1184009880
.quad __Nodes + 1180
.quad __Nodes + 640
.int 720713971
.quad __Nodes + 380
.quad 0
.int -1077633261
.quad 0
.quad 0
.int -1943634488
.quad 0
.quad 0
.int 620345867
.quad __Nodes + 1780
.quad 0
.int -260808047
.quad __Nodes + 1740
.quad 0
.int -256649272
.quad 0
.quad __Nodes + 140
.int -1759801655
.quad __Nodes + 540
.quad 0
.int 633844912
.quad 0
.quad __Nodes + 1760
.int -1600845924
.quad __Nodes + 1400
.quad __Nodes + 1000
.int -1923167212
.quad __Nodes + 320
.quad 0
.int 1646468541
.quad 0
.quad 0
.int -529852374
.quad 0
.quad 0
.int 1101467125
.quad __Nodes + 1460
.quad __Nodes + 940
.int -1681275308
.quad 0
__Garbage_419755161: .byte 246, 187, 145, 153
root:
.quad __Nodes + 1120

node:
.quad 289110179
.int 1976160822
.quad 148861026
