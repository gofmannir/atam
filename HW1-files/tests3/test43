.global _start

.section .text

  movq root, %rdi
  xor %r8, %r8
  movl __ExpectedArraySize, %r8d
  movq $__ExpectedArray, %r9
  movq $0, %r10
  call rec

  cmp %r10, %r8
  jne bad_exit
  
  movq $60, %rax
  movq $0, %rdi
  syscall

bad_exit:
  movq $60, %rax
  movq $1, %rdi
  syscall

rec:
  pushq %rdi
  movq (%rdi), %r11
  cmp $0, %r11
  je skip_left
  movq %r11, %rdi
  call rec
  movq (%rsp), %rdi
skip_left:
  cmpq %r8, %r10
  je bad_exit
  movl 8(%rdi), %eax
  movl (%r9, %r10, 4), %edx
  cmpl %eax, %edx
  jne bad_exit
  inc %r10

  movq 12(%rdi), %r11
  cmp $0, %r11
  je skip_right
  movq %r11, %rdi
  call rec
skip_right:
  popq %rdi
  ret


.section .data
__ExpectedArray: .int -2066496943, -1958709359, -1943768699, -1799461577, -1653837825, -1620304604, -1591603784, -1303529640, -1294114472, -1288432433, -1212230885, -1166865248, -844983687, -622869315, -592580717, -235327622, -36954273, -9734180, 52991407, 164083282, 235988159, 447100517, 609212292, 781409571, 1034408580, 1139094853, 1225895410, 1287591234, 1295003614, 1360894764, 1408058618, 1679917149, 1895551266, 1989483381
__Garbage_972360859: .byte 2, 236, 129, 201, 128, 91
__ExpectedArraySize: .int 34

__Nodes:
.quad 0
.int -1166865248
.quad 0
.quad __Nodes + 340
.int -1212230885
.quad __Nodes + 280
.quad 0
.int 1360894764
.quad 0
.quad __Nodes + 0
.int -844983687
.quad 0
.quad 0
.int 1295003614
.quad __Nodes + 40
.quad 0
.int 1225895410
.quad 0
.quad __Nodes + 260
.int 164083282
.quad __Nodes + 140
.quad __Nodes + 580
.int 609212292
.quad 0
.quad __Nodes + 60
.int -592580717
.quad __Nodes + 500
.quad 0
.int -1294114472
.quad 0
.quad 0
.int 1895551266
.quad 0
.quad __Nodes + 640
.int 1139094853
.quad __Nodes + 100
.quad __Nodes + 560
.int -1591603784
.quad 0
.quad __Nodes + 20
.int 52991407
.quad 0
.quad __Nodes + 160
.int -9734180
.quad 0
.quad 0
.int -1799461577
.quad 0
.quad __Nodes + 200
.int 1989483381
.quad 0
.quad __Nodes + 240
.int -1303529640
.quad __Nodes + 360
.quad __Nodes + 180
.int -1288432433
.quad 0
.quad 0
.int -235327622
.quad 0
.quad 0
.int 1034408580
.quad 0
.quad 0
.int 235988159
.quad 0
.quad __Nodes + 600
.int 1679917149
.quad __Nodes + 320
.quad __Nodes + 480
.int -1653837825
.quad __Nodes + 120
.quad __Nodes + 540
.int -1943768699
.quad __Nodes + 300
.quad __Nodes + 380
.int -36954273
.quad 0
.quad __Nodes + 220
.int 1287591234
.quad __Nodes + 440
.quad __Nodes + 620
.int -1958709359
.quad 0
.quad 0
.int -1620304604
.quad 0
.quad __Nodes + 420
.int 447100517
.quad 0
.quad __Nodes + 80
.int 1408058618
.quad 0
.quad 0
.int -2066496943
.quad 0
.quad __Nodes + 460
.int 781409571
.quad __Nodes + 400
__Garbage_212524274: .byte 170, 244, 138, 208, 131, 231, 205
root:
.quad __Nodes + 520
__Garbage_3721075: .byte 92, 159, 112, 48, 187, 174, 183
node:
.quad -1623539245
.int -622869315
.quad 1233659900
