.global _start

.section .text

  movq root, %rdi
  xor %r8, %r8
  movl __ExpectedArraySize, %r8d
  movq $__ExpectedArray, %r9
  movq $0, %r10
  call rec

  cmp %r10, %r8
  jne bad_exit
  
  movq $60, %rax
  movq $0, %rdi
  syscall

bad_exit:
  movq $60, %rax
  movq $1, %rdi
  syscall

rec:
  pushq %rdi
  movq (%rdi), %r11
  cmp $0, %r11
  je skip_left
  movq %r11, %rdi
  call rec
  movq (%rsp), %rdi
skip_left:
  cmpq %r8, %r10
  je bad_exit
  movl 8(%rdi), %eax
  movl (%r9, %r10, 4), %edx
  cmpl %eax, %edx
  jne bad_exit
  inc %r10

  movq 12(%rdi), %r11
  cmp $0, %r11
  je skip_right
  movq %r11, %rdi
  call rec
skip_right:
  popq %rdi
  ret


.section .data
__ExpectedArray: .int -2071195110, -2037782217, -1781530469, -1764643952, -1488624958, -1448286439, -1414434613, -1378364565, -1378005475, -1323301368, -1032169764, -943520010, -820177669, -662502539, -635258139, -576251258, -476925774, -457115478, -411239967, -340489669, -35819071, -12303703, 161837, 54281704, 187166844, 194170499, 292719446, 352425444, 516942715, 559049369, 571377120, 598119017, 610545660, 617056935, 650862311, 748732950, 818768410, 1024485934, 1097324363, 1270183018, 1311854115, 1352597293, 1519813638, 1703550871, 1729903801, 1773058945, 1797868355, 1877094465, 1899873460, 1950660296, 2017289791, 2097987863, 2147377887
__Garbage_69205772: .byte 116, 248, 162, 99, 98, 143
__ExpectedArraySize: .int 53
__Garbage_910124783: .byte 158, 125
__Nodes:
.quad 0
.int 1519813638
.quad 0
.quad __Nodes + 820
.int -1414434613
.quad __Nodes + 260
.quad __Nodes + 100
.int -1448286439
.quad 0
.quad 0
.int 1899873460
.quad 0
.quad 0
.int -2037782217
.quad 0
.quad 0
.int -1488624958
.quad 0
.quad __Nodes + 400
.int 292719446
.quad __Nodes + 880
.quad 0
.int 1097324363
.quad 0
.quad __Nodes + 620
.int 1352597293
.quad __Nodes + 520
.quad __Nodes + 560
.int -457115478
.quad __Nodes + 440
.quad 0
.int 2017289791
.quad __Nodes + 480
.quad __Nodes + 920
.int -1781530469
.quad __Nodes + 320
.quad __Nodes + 720
.int 748732950
.quad 0
.quad 0
.int -1378364565
.quad __Nodes + 300
.quad __Nodes + 140
.int 1270183018
.quad __Nodes + 1000
.quad 0
.int -1378005475
.quad __Nodes + 460
.quad __Nodes + 20
.int -943520010
.quad __Nodes + 120
.quad 0
.int -411239967
.quad 0
.quad __Nodes + 580
.int 2147377887
.quad 0
.quad 0
.int 1877094465
.quad __Nodes + 60
.quad __Nodes + 600
.int -662502539
.quad __Nodes + 840
.quad 0
.int 187166844
.quad 0
.quad __Nodes + 340
.int -340489669
.quad __Nodes + 800
.quad __Nodes + 900
.int -1032169764
.quad 0
.quad 0
.int 2097987863
.quad 0
.quad 0
.int 54281704
.quad __Nodes + 760
.quad __Nodes + 960
.int 1773058945
.quad 0
.quad __Nodes + 640
.int 516942715
.quad __Nodes + 660
.quad 0
.int -635258139
.quad __Nodes + 980
.quad __Nodes + 380
.int 1950660296
.quad __Nodes + 200
.quad 0
.int -820177669
.quad 0
.quad 0
.int 1024485934
.quad __Nodes + 280
.quad 0
.int 352425444
.quad 0
.quad __Nodes + 680
.int 571377120
.quad __Nodes + 1020
.quad 0
.int 559049369
.quad 0
.quad 0
.int -476925774
.quad 0
.quad 0
.int 598119017
.quad __Nodes + 740
.quad __Nodes + 860
.int 617056935
.quad __Nodes + 780
.quad __Nodes + 420
.int 194170499
.quad 0
.quad 0
.int 650862311
.quad 0
.quad __Nodes + 940
.int -12303703
.quad 0
.quad 0
.int -1764643952
.quad __Nodes + 40
.quad __Nodes + 180
.int 161837
.quad __Nodes + 500
.quad 0
.int 610545660
.quad 0
.quad __Nodes + 540
.int 1797868355
.quad __Nodes + 360
.quad 0
.int -1323301368
.quad 0
.quad 0
.int -2071195110
.quad __Nodes + 80
.quad 0
.int -35819071
.quad 0
.quad __Nodes + 0
.int 1729903801
.quad 0
.quad 0
.int -576251258
.quad __Nodes + 700
.quad 0
.int 1311854115
.quad 0
.quad __Nodes + 240
.int 818768410
.quad __Nodes + 160
__Garbage_448948345: .byte 78
root:
.quad __Nodes + 220

node:
.quad -1235140302
.int 1703550871
.quad -762899125
