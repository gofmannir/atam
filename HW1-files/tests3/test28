.global _start

.section .text

  movq root, %rdi
  xor %r8, %r8
  movl __ExpectedArraySize, %r8d
  movq $__ExpectedArray, %r9
  movq $0, %r10
  call rec

  cmp %r10, %r8
  jne bad_exit
  
  movq $60, %rax
  movq $0, %rdi
  syscall

bad_exit:
  movq $60, %rax
  movq $1, %rdi
  syscall

rec:
  pushq %rdi
  movq (%rdi), %r11
  cmp $0, %r11
  je skip_left
  movq %r11, %rdi
  call rec
  movq (%rsp), %rdi
skip_left:
  cmpq %r8, %r10
  je bad_exit
  movl 8(%rdi), %eax
  movl (%r9, %r10, 4), %edx
  cmpl %eax, %edx
  jne bad_exit
  inc %r10

  movq 12(%rdi), %r11
  cmp $0, %r11
  je skip_right
  movq %r11, %rdi
  call rec
skip_right:
  popq %rdi
  ret


.section .data
__ExpectedArray: .int -2000501497, -1964792038, -1763222669, -1653477239, -1638291680, -1545892350, -1544578805, -1398775830, -1394431520, -1349306267, -1283205302, -1187418090, -1108110578, -1030867613, -986275569, -965954062, -888608078, -845057841, -802636867, -790987580, -733438607, -656735019, -574440987, -495169773, -460758361, -449982464, -415547049, -348221085, -323300825, -168805169, -119522746, -81316601, -41049805, -34365311, 242354092, 274458026, 288439578, 306744608, 422449110, 548864030, 563573731, 611550567, 685940395, 768249347, 1142397428, 1149622599, 1267005567, 1312398665, 1392194061, 1426209789, 1756464298, 1806843866, 1820343118, 1922167330, 2046710118
__Garbage_423304097: .byte 156, 174, 10, 21, 253, 130, 148, 220
__ExpectedArraySize: .int 55
__Garbage_806974241: .byte 51
__Nodes:
.quad 0
.int -1108110578
.quad 0
.quad 0
.int 1312398665
.quad __Nodes + 980
.quad 0
.int -495169773
.quad 0
.quad __Nodes + 900
.int 611550567
.quad 0
.quad 0
.int -348221085
.quad 0
.quad __Nodes + 860
.int -1030867613
.quad __Nodes + 640
.quad 0
.int -449982464
.quad 0
.quad __Nodes + 560
.int -733438607
.quad __Nodes + 200
.quad 0
.int 1149622599
.quad 0
.quad 0
.int -168805169
.quad __Nodes + 340
.quad 0
.int -656735019
.quad 0
.quad 0
.int -1638291680
.quad 0
.quad 0
.int -1544578805
.quad __Nodes + 1020
.quad 0
.int 563573731
.quad 0
.quad __Nodes + 240
.int -1394431520
.quad __Nodes + 580
.quad 0
.int -1763222669
.quad 0
.quad __Nodes + 40
.int -460758361
.quad __Nodes + 1000
.quad __Nodes + 920
.int 274458026
.quad __Nodes + 660
.quad 0
.int -965954062
.quad __Nodes + 380
.quad 0
.int -888608078
.quad 0
.quad 0
.int -986275569
.quad __Nodes + 460
.quad __Nodes + 400
.int -574440987
.quad __Nodes + 320
.quad __Nodes + 160
.int 1267005567
.quad __Nodes + 780
.quad __Nodes + 360
.int -845057841
.quad __Nodes + 140
.quad __Nodes + 60
.int 685940395
.quad 0
.quad 0
.int -119522746
.quad 0
.quad __Nodes + 720
.int 1820343118
.quad __Nodes + 540
.quad 0
.int 1922167330
.quad 0
.quad 0
.int -802636867
.quad __Nodes + 740
.quad 0
.int -1349306267
.quad 0
.quad 0
.int -34365311
.quad 0
.quad 0
.int -2000501497
.quad __Nodes + 680
.quad __Nodes + 940
.int 1142397428
.quad __Nodes + 800
.quad __Nodes + 700
.int 422449110
.quad __Nodes + 760
.quad 0
.int -1964792038
.quad __Nodes + 880
.quad 0
.int 288439578
.quad __Nodes + 1040
.quad __Nodes + 440
.int 1806843866
.quad 0
.quad 0
.int -790987580
.quad 0
.quad __Nodes + 480
.int 768249347
.quad 0
.quad __Nodes + 20
.int 1756464298
.quad 0
.quad __Nodes + 520
.int 2046710118
.quad 0
.quad 0
.int -1187418090
.quad __Nodes + 0
.quad __Nodes + 500
.int -81316601
.quad 0
.quad __Nodes + 960
.int -1283205302
.quad __Nodes + 820
.quad __Nodes + 300
.int -1653477239
.quad __Nodes + 220
.quad 0
.int 548864030
.quad __Nodes + 260
.quad __Nodes + 840
.int -41049805
.quad __Nodes + 1060
.quad __Nodes + 420
.int -323300825
.quad __Nodes + 180
.quad __Nodes + 620
.int -1545892350
.quad __Nodes + 280
.quad 0
.int 1392194061
.quad 0
.quad __Nodes + 120
.int -415547049
.quad __Nodes + 80
.quad 0
.int -1398775830
.quad 0
.quad 0
.int 306744608
.quad 0
.quad __Nodes + 600
.int 242354092
.quad 0
__Garbage_212664457: .byte 142
root:
.quad __Nodes + 100
__Garbage_56927506: .byte 201, 177, 90, 8, 1
node:
.quad 763180348
.int 1426209789
.quad 805521541
